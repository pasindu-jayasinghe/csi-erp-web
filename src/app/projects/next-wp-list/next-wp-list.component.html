<div class="container pl-20 pr-20">
  <h4 class="mt-4">Work Plan</h4>
  <div class="card">

<div class="p-grid p-fluid col-sm-12">
  <div class="row mb-3">
      <div class="col-md-6">
        <div class="col-12" *ngIf="!dropVisible">
          <div class="p-field" >
            <label for="userType">Employees</label>
          </div>
          <p-dropdown
            name="user"
            [(ngModel)]="searchBy.user"
            [options]="users"
            [showClear]="true"
            [filter]="true"
            placeholder="Select Employee"
            optionLabel="first_name"
            appendTo="body"
            (ngModelChange)="onChangeUser($event)"

          >
          </p-dropdown>
        </div>
      </div>
      <div class="col-md-6">

        <div class="p-inputgroup pt-4">
          
          <p-calendar placeholder="Select Date Range"
          appendTo="body" [showClear]="true" [(ngModel)]="dates" selectionMode="range" [readonlyInput]="true"  (ngModelChange)="changeDate($event)"></p-calendar>
          <!-- <button
            type="button"
            pButton
            pRipple
            label="This Week Plan"
          ></button> -->
        </div>
      </div>
    </div>

</div>



<div class="row p-2">
  <p-table #table 
    [value]="activities" 
    [lazy]="true" 
    (onLazyLoad)="loadgridData($event)" 
    [paginator]="true"
    [rows]="rows"
    [showCurrentPageReport]="true" 
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [rowsPerPageOptions]="[ 10, 25, 50]" 
    [totalRecords]="totalRecords" 
    [loading]="loading" 
  >  
    <ng-template pTemplate="header">


      <tr>
        <th>
          <div class="col-sm-2" style="width: 70.666667%">
          </div>
        </th>
        <th>Employee</th>
        <th>Project</th>
        <th>Task</th>
        <th>Planned MDs</th>
        <th>Used MDs</th>
        <th>Progress</th>
        <th>From Date</th>
        <th>To Date</th>
        <th>Allocated MDs</th>


      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-act>
      <tr>
        <td>
          <!-- <button type="button" class="p-button-rounded p-button-text   " (click)="viewDailyProgress(atend)" 
      
                           pButton  icon="pi pi-eye"
          style=" border-color:green; "
          
          >
        </button> -->
<!--           
          <button type="button" class="p-button-rounded p-button-text " (click)="editDailyProgress(atend)"  
    
          pButton pRipple icon="pi pi-pencil"
          style=" border-color:brown; "
          ></button> -->

          <!-- <button type="button" class="p-button-rounded p-button-text " (click)="viewDailyProgress(atend)"  pButton pRipple icon="pi pi-times"
          style=" border-color:red; "
          ></button>
        </td> -->
        <!-- <td>
          <button type="button" class="p-button-rounded p-button-text " (click)="viewDailyProgress(atend)"  pButton pRipple icon="pi pi-pencil"
          ></button>
        </td>
-->
       <td>{{ act.assign_to?.first_name}}</td>
        <td>{{ act.project.name }}</td>
        <td>{{ act.name }}</td>
        <td>{{ act.planned_MD }}</td>
        <td>{{ act.used_MD }}</td>
        <td>{{ act.progress}}%</td>
        <td>{{ act.fromDate | date : "dd-MM-yyyy"}}</td>
        <td>{{ act.toDate  | date : "dd-MM-yyyy"}}</td>
        <td>{{ act.week_MD }}</td>




     


      </tr>
    </ng-template>
  </p-table>
</div>

</div>
</div>